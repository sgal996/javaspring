<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="20191104-04" author="sime">
        <createTable tableName="USERS">
            <column autoIncrement="true" name="ID" type="INT">
                <constraints primaryKey="true"/>
            </column>
            <column name="NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="EMAIL" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="PASSWORD" type="VARCHAR(255)"/>
        </createTable>
        <rollback>
            <dropTable tableName="USERS"/>
        </rollback>
    </changeSet>

    <changeSet id="20201104-04" author="sime">
        <createTable tableName="ROLES">
            <column autoIncrement="true" name="ID" type="INT">
                <constraints primaryKey="true"/>
            </column>
            <column name="NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="ROLES"/>
        </rollback>
    </changeSet>

    <changeSet id="20201104-04" author="sime">
        <createTable tableName="ROLES">
            <column autoIncrement="true" name="ID" type="INT">
                <constraints primaryKey="true"/>
            </column>
            <column name="NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="ROLES"/>
        </rollback>
    </changeSet>

    <changeSet id="20201104-05" author="sime">
        <createTable tableName="USER_ROLES">
            <column name="USER_ID" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="ROLE_ID" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="ROLES"/>
        </rollback>
    </changeSet>

    <changeSet id="20200102" author="sime">
        <insert tableName="ROLES">
            <column name="ID" value="1"></column>
            <column name="NAME" value="ADMIN"></column>
        </insert>
        <insert tableName="roles">
            <column name="ID" value="2"></column>
            <column name="NAME" value="USER"></column>
        </insert>
    </changeSet>

    <changeSet id="20301104-04" author="sime">
        <createTable tableName="PRODUCTS">
            <column autoIncrement="true" name="ID" type="INT">
                <constraints primaryKey="true"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="IMAGE" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="PRICE" type="DECIMAL(15,2)">
                <constraints nullable="false"/>
            </column>
            <column name="DISCOUNT" type="DECIMAL(15,2)">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="CATEGORY" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="PRODUCTS"/>
        </rollback>
    </changeSet>

    <changeSet id="20401104-04" author="sime">
        <createTable tableName="ORDERS">
            <column autoIncrement="true" name="ID" type="INT">
                <constraints primaryKey="true"/>
            </column>
            <column name="USER_ID" type="INT">
                <constraints nullable="false"/>
            </column>
            
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="PRICE" type="DECIMAL">
                <constraints nullable="false"/>
            </column>
            <column name="COUPON" type="VARCHAR(255)">
                <constraints nullable="true"/>
            </column>
            <column name="IS_CONFIRMED" type="VARCHAR(255)">
                <constraints  nullable="true"/>
            </column>

        </createTable>
        <rollback>
            <dropTable tableName="ORDERS"/>
        </rollback>
    </changeSet>

    <changeSet id="20501104-05" author="sime">
        <createTable tableName="ORDER_PRODUCTS">
            <column name="ORDER_ID" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="PRODUCT_ID" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="ORDER_PRODUCTS"/>
        </rollback>
    </changeSet>

</databaseChangeLog>

